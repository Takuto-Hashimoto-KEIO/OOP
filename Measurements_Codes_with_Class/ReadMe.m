% ReadMe
% 
%% 本フォルダの実験コード群の概要
% 
% 本実験コード群は、キーボードの打鍵実験を行うためのMATLABスクリプト群です。
% Psychtoolbox を利用し、リアルタイムで打鍵の成功・失敗を判定しながら、被験者に視覚的フィードバックを提供します。
% また、結果は .mat ファイルとして保存されます。
% 
% 
%% 実験の概要
% 実験の流れ：速度調節Block(S1,S2、被験者が正確に運動実行できる速度の探索) 
% → 練習Block(P、被験者を打鍵に慣れさせる) 
% → Main block(M、評価する打鍵と脳波の取得)
% trialの流れ：Rest(安静)→ Ready(準備)→ Task(運動実行) → Blank(休憩)。Main blockではこれを20trial×5回行う。
% Task(運動実行)：一定速度で「1,2,3,4」と数字を繰り返し画面に提示し、対応する指で順番に繰り返しキーボードを押してもらうもの。
% 一度に20秒間で、被験者ごとに速度を自動調節する。
%
% 
%% フォルダ構成
% 
% /Experiment
% │── main_script.m       % 実験のメインスクリプト
% │── TrialMaster.m       % 打鍵時刻の記録・判定・画面提示処理
% │── ResultsKeeper.m     % 実験結果を .mat ファイルとして保存
% │── Setup/              % 実験の初期設定スクリプトを含むフォルダ
% │   ├── Startup_SA.m    % Psychtoolbox の環境をセットアップ
% │── PreTask/            % 実験前の準備スクリプトを含むフォルダ
% │── Task/               % 実験中の処理を含むフォルダ
% │── PostTask/           % 実験後の処理を含むフォルダ
% 
% 
%% スクリプトの詳細
% 
% 1. main_script.m
% 
% このスクリプトが実験の全体の流れを管理します。
% 
% TrialMaster を利用して打鍵の記録と判定を行う。
% 
% ResultsKeeper により結果を保存。
% 
% 各フェーズ（PreTask, Task, PostTask）の処理を実行。
% 
%
% 2. TrialMaster.m
% 
% タスク中に以下の処理をリアルタイムで行います。
% 
% 各打鍵時刻の記録。
% 
% 特定の時間窓内での打鍵成功判定。
% 
% 画面に数字を提示。
% 
% 打鍵判定区間の更新を、タスクの時間が経過するまで繰り返す。
% 
% 
% 3. ResultsKeeper.m
% 
% .mat ファイルとして、実験結果を保存。
% 
% 重要な変数（打鍵時刻、成功判定結果など）が格納される。
% 
% 
% 4. Setup/Startup_SA.m
% 
% Psychtoolbox の環境をセットアップ。
% 
% 実行時に GStreamer のパスを自動的に追加。
% 
% 環境変数 GSTREAMER_1_0_ROOT_MSVC_X86_64 が未定義の場合、エラーメッセージを表示。
% 
% 
%% 実行方法
% 
% MATLAB で main_script.m を実行する。
% このとき、settingsの中身を書き換えることで実行するBlockの種類や打鍵の速度を切り替えられる。
% 
% 実験の各ブロックが進行し、データが収集される。
% 
% 実験終了後、結果が .mat ファイルとして保存される。
% 
%
%% 注意事項
% 
% Psychtoolbox が正しくインストールされていることを確認してください。
% 
% GStreamer のセットアップが必要な場合があります。
% 
% 結果の保存場所は Results/ フォルダ内の .mat ファイルとなります。
% 
%
%% バージョン管理
% 
% 本コードは MATLAB R2022b で動作確認済み。
% 
% Psychtoolbox のバージョン依存性に注意してください。
% 
% 
% 以上が実験コードの ReadMe です。